; DECODIFICADOR DE NÚMERO DE 2 BITS A DIS´LAY DE 7 SEGMENTOS DE CÁTODO COMÚN

#include "p18f4550.inc"

;PORTD -GFABECD
#DEFINE CERO B'00111111'
#DEFINE UNO  B'00001010'
#DEFINE DOS  B'01011101'
#DEFINE TRES B'01011011'
#DEFINE COPIA B'00000000'

ORG 0
GOTO INICIO
TABLA ; TODO ESTO ES POSIBLE POR EL PC
  ADDWF, PCL,F,0 ; PC40
  ;DT CERO,UNO,DOS,TRES
  RETLW CERO ; PC 42
  RETLW UNO ; PC 44
  RETLW DOS ; PC 46
  RETLW TRES ; PC 48

INICIO
  MOVLW B'00000011'
  MOVWF TRISA,0
  CLRF PROTA,0
  MOVLW .7
  MOVWF CMCON,0
  MOVLW .15
  MOVWF ADCON1,0
  CLRF TRISD,0
  CLRF PORTD,0

MAIN
  MOVFF PORTA,COPIA
  MOVLW B'00000011' ; PC=22 MÁSCARA
  ANDWF COPIA,W,1 ; PC=24 W TIENE LA ENTRADA ENMASCARADA Y ES EL DATO QUE SE BUSCARÁ EN LA TABLA
                  ; PARA ESTE PROGRAMA ES EL DATO A DECODIFICAR
  MULLW .2 ; PC= 26
  MOVF PRODL,W,0 ; PC = 28 AQUÍ W YA ES PAR
  CALL TABLA ; PC = 30 TV ES UNA SUBRUTINA, AQUÍ SE LLAMA
  MOVWF PORTD,0 ; PC = 34 W TRAE LA DECODIFICACION
  GOTO MAIN ; PC = 36
  END